/**
 * DevSphere Icon Library
 * Extended icon set for all technologies
 */

const DevSphereIcons = {
	// Programming Languages
	languages: {
		python: { emoji: 'ğŸ', color: '#3776AB', name: 'Python' },
		java: { emoji: 'â˜•', color: '#007396', name: 'Java' },
		javascript: { emoji: 'ğŸŸ¨', color: '#F7DF1E', name: 'JavaScript' },
		typescript: { emoji: 'ğŸ“˜', color: '#3178C6', name: 'TypeScript' },
		rust: { emoji: 'ğŸ¦€', color: '#CE422B', name: 'Rust' },
		go: { emoji: 'ğŸ¹', color: '#00ADD8', name: 'Go' },
		golang: { emoji: 'ğŸ¹', color: '#00ADD8', name: 'Golang' },
		php: { emoji: 'ğŸ˜', color: '#777BB4', name: 'PHP' },
		'c-cpp': { emoji: 'âš¡', color: '#00599C', name: 'C/C++' },
		'c&c++': { emoji: 'âš¡', color: '#00599C', name: 'C & C++' },
		r: { emoji: 'ğŸ“Š', color: '#276DC3', name: 'R' },
		bash: { emoji: 'ğŸ’²', color: '#4EAA25', name: 'Bash' },
		kql: { emoji: 'ğŸ”', color: '#0078D4', name: 'KQL' },
		sql: { emoji: 'ğŸ—„ï¸', color: '#CC2927', name: 'SQL' }
	},

	// Frameworks
	frameworks: {
		nodejs: { emoji: 'ğŸŸ¢', color: '#339933', name: 'Node.js' },
		expressjs: { emoji: 'âš¡', color: '#000000', name: 'Express.js' },
		nextjs: { emoji: 'â–²', color: '#000000', name: 'Next.js' },
		django: { emoji: 'ğŸ¸', color: '#092E20', name: 'Django' },
		flask: { emoji: 'ğŸŒ¶ï¸', color: '#000000', name: 'Flask' },
		'spring-boot': { emoji: 'ğŸƒ', color: '#6DB33F', name: 'Spring Boot' },
		react: { emoji: 'âš›ï¸', color: '#61DAFB', name: 'React' },
		vue: { emoji: 'ğŸ’š', color: '#42B883', name: 'Vue.js' },
		angular: { emoji: 'ğŸ…°ï¸', color: '#DD0031', name: 'Angular' },
		laravel: { emoji: 'ğŸ”º', color: '#FF2D20', name: 'Laravel' },
		rails: { emoji: 'ğŸ’', color: '#CC0000', name: 'Ruby on Rails' },
		aspnet: { emoji: 'ğŸ”·', color: '#512BD4', name: 'ASP.NET' }
	},

	// Databases
	databases: {
		mysql: { emoji: 'ğŸ¬', color: '#4479A1', name: 'MySQL' },
		postgresql: { emoji: 'ğŸ˜', color: '#336791', name: 'PostgreSQL' },
		mongodb: { emoji: 'ğŸƒ', color: '#47A248', name: 'MongoDB' },
		redis: { emoji: 'ğŸ”´', color: '#DC382D', name: 'Redis' },
		dynamodb: { emoji: 'âš¡', color: '#4053D6', name: 'DynamoDB' },
		sqlite: { emoji: 'ğŸ’¾', color: '#003B57', name: 'SQLite' },
		mariadb: { emoji: 'ğŸŒŠ', color: '#003545', name: 'MariaDB' },
		cassandra: { emoji: 'ğŸ”·', color: '#1287B1', name: 'Cassandra' },
		elasticsearch: { emoji: 'ğŸ”', color: '#005571', name: 'Elasticsearch' },
		firebase: { emoji: 'ğŸ”¥', color: '#FFCA28', name: 'Firebase' }
	},

	// DevOps & Tools
	devops: {
		docker: { emoji: 'ğŸ³', color: '#2496ED', name: 'Docker' },
		kubernetes: { emoji: 'â˜¸ï¸', color: '#326CE5', name: 'Kubernetes' },
		git: { emoji: 'ğŸ“¦', color: '#F05032', name: 'Git' },
		github: { emoji: 'ğŸ™', color: '#181717', name: 'GitHub' },
		gitlab: { emoji: 'ğŸ¦Š', color: '#FC6D26', name: 'GitLab' },
		jenkins: { emoji: 'ğŸ”¨', color: '#D24939', name: 'Jenkins' },
		circleci: { emoji: 'â­•', color: '#343434', name: 'CircleCI' },
		travis: { emoji: 'ğŸ”§', color: '#3EAAAF', name: 'Travis CI' },
		ansible: { emoji: 'ğŸ…°ï¸', color: '#EE0000', name: 'Ansible' },
		terraform: { emoji: 'â˜ï¸', color: '#7B42BC', name: 'Terraform' },
		postman: { emoji: 'ğŸ“®', color: '#FF6C37', name: 'Postman' },
		nginx: { emoji: 'ğŸŸ¢', color: '#009639', name: 'Nginx' },
		apache: { emoji: 'ğŸª¶', color: '#D22128', name: 'Apache' },
		aws: { emoji: 'â˜ï¸', color: '#FF9900', name: 'AWS' },
		azure: { emoji: 'â˜ï¸', color: '#0078D4', name: 'Azure' },
		gcp: { emoji: 'â˜ï¸', color: '#4285F4', name: 'Google Cloud' }
	},

	// Testing Tools
	testing: {
		jest: { emoji: 'ğŸƒ', color: '#C21325', name: 'Jest' },
		jtest: { emoji: 'âœ…', color: '#25A162', name: 'JTest' },
		mocha: { emoji: 'â˜•', color: '#8D6748', name: 'Mocha' },
		jasmine: { emoji: 'ğŸŒ¸', color: '#8A4182', name: 'Jasmine' },
		pytest: { emoji: 'ğŸ§ª', color: '#0A9EDC', name: 'Pytest' },
		selenium: { emoji: 'ğŸŒ', color: '#43B02A', name: 'Selenium' },
		cypress: { emoji: 'ğŸŒ²', color: '#17202C', name: 'Cypress' },
		junit: { emoji: 'â˜•', color: '#25A162', name: 'JUnit' }
	},

	// Documentation & Pages
	pages: {
		documentation: { emoji: 'ğŸ“š', color: '#8B5CF6', name: 'Documentation' },
		faq: { emoji: 'â“', color: '#F59E0B', name: 'FAQ' },
		quickstart: { emoji: 'ğŸš€', color: '#10B981', name: 'Quick Start' },
		changelog: { emoji: 'ğŸ“', color: '#6366F1', name: 'Changelog' },
		about: { emoji: 'â„¹ï¸', color: '#3B82F6', name: 'About' },
		contact: { emoji: 'ğŸ“§', color: '#EC4899', name: 'Contact' },
		community: { emoji: 'ğŸ‘¥', color: '#8B5CF6', name: 'Community' },
		security: { emoji: 'ğŸ”’', color: '#EF4444', name: 'Security' },
		resources: { emoji: 'ğŸ“š', color: '#8B5CF6', name: 'Resources' },
		'install-guide': { emoji: 'âš™ï¸', color: '#6366F1', name: 'Install Guide' },
		intro: { emoji: 'ğŸ“–', color: '#8B5CF6', name: 'Introduction' }
	}
};

/**
 * Get icon for a technology
 * @param {string} tech - Technology name (lowercase)
 * @param {string} category - Category (languages, frameworks, databases, devops, testing, pages)
 * @returns {object} Icon object with emoji, color, and name
 */
function getIcon(tech, category = null) {
	const normalizedTech = tech.toLowerCase().replace(/\s+/g, '-');
	
	// If category is specified, search only in that category
	if (category && DevSphereIcons[category]) {
		return DevSphereIcons[category][normalizedTech] || { emoji: 'ğŸ“„', color: '#6B7280', name: tech };
	}
	
	// Search across all categories
	for (const cat of Object.values(DevSphereIcons)) {
		if (cat[normalizedTech]) {
			return cat[normalizedTech];
		}
	}
	
	// Default fallback
	return { emoji: 'ğŸ“„', color: '#6B7280', name: tech };
}

/**
 * Create an icon element
 * @param {string} tech - Technology name
 * @param {string} category - Category (optional)
 * @param {string} size - Size (small, medium, large)
 * @returns {string} HTML string for icon
 */
function createIcon(tech, category = null, size = 'medium') {
	const icon = getIcon(tech, category);
	const sizeMap = {
		small: '1.5rem',
		medium: '2rem',
		large: '3rem'
	};
	
	return `
		<span class="tech-icon tech-icon-${size}" 
		      style="font-size: ${sizeMap[size]}; color: ${icon.color};" 
		      title="${icon.name}">
			${icon.emoji}
		</span>
	`;
}

/**
 * Create an icon with label
 * @param {string} tech - Technology name
 * @param {string} category - Category (optional)
 * @returns {string} HTML string for icon with label
 */
function createIconWithLabel(tech, category = null) {
	const icon = getIcon(tech, category);
	
	return `
		<div class="tech-icon-label">
			<span class="tech-icon" style="color: ${icon.color};">${icon.emoji}</span>
			<span class="tech-name">${icon.name}</span>
		</div>
	`;
}

/**
 * Get all icons in a category
 * @param {string} category - Category name
 * @returns {object} Object of all icons in category
 */
function getIconsByCategory(category) {
	return DevSphereIcons[category] || {};
}

/**
 * Search icons by name
 * @param {string} query - Search query
 * @returns {array} Array of matching icons
 */
function searchIcons(query) {
	const results = [];
	const lowerQuery = query.toLowerCase();
	
	for (const [category, icons] of Object.entries(DevSphereIcons)) {
		for (const [key, icon] of Object.entries(icons)) {
			if (icon.name.toLowerCase().includes(lowerQuery) || key.includes(lowerQuery)) {
				results.push({ ...icon, key, category });
			}
		}
	}
	
	return results;
}

// Export for use in other modules
if (typeof module !== 'undefined' && module.exports) {
	module.exports = {
		DevSphereIcons,
		getIcon,
		createIcon,
		createIconWithLabel,
		getIconsByCategory,
		searchIcons
	};
}
